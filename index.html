<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shard Fragment Merger</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 500px; margin: 2rem auto; }
  label { display: block; margin-top: 1rem; font-weight: bold; }
  input { width: 100%; padding: 0.5rem; font-size: 1rem; margin-top: 0.25rem; }
  button { margin-top: 1.5rem; padding: 0.75rem 1.5rem; font-size: 1.1rem; cursor: pointer; }
  #result { margin-top: 2rem; font-size: 1.3rem; font-weight: bold; }
  .error { color: red; }
  .success { color: green; }
</style>
</head>
<body>

<h1>Shard Fragment Merger</h1>

<label for="fragment1">Shard Fragment 1:</label>
<input id="fragment1" type="text" placeholder="Enter first shard fragment" />

<label for="fragment2">Shard Fragment 2:</label>
<input id="fragment2" type="text" placeholder="Enter second shard fragment" />

<button id="mergeBtn">Merge Shards</button>

<div id="result"></div>

<script>
// Known 22 shard fragments
const validShards = [
  "F00!Lm", "ErR@88", "D0r#56", "V1Z$77", "SuN^11", "TyR@99", "WtT!33", "HgM*64",
  "Drk$42", "D3A^09", "TwG#80", "Dmn%66", "RpX^07", "HrM#77", "Prg!94", "WhF^22",
  "MoM@31", "MoO#08", "AbY&01", "ChD#66", "BlX!An", "Ju5*C3"
];

// Code map for all unordered pairs (key = concat of two shards, any order)
// For brevity here, only a few samples; full mapping is below.
const codeMap = {
  "F00!LmF00!Lm": "E44R",
  "F00!LmErR@88": "4FF4",
  "ErR@88F00!Lm": "4FF4",
  "F00!LmD0r#56": "0M3U",
  "D0r#56F00!Lm": "0M3U",
  "F00!LmV1Z$77": "2KY9",
  "V1Z$77F00!Lm": "2KY9",
  "F00!LmSuN^11": "G65V",
  "SuN^11F00!Lm": "G65V",
  "F00!LmTyR@99": "X6OL",
  "TyR@99F00!Lm": "X6OL",
  "F00!LmWtT!33": "JSRW",
  "WtT!33F00!Lm": "JSRW",
  "F00!LmHgM*64": "9J8T",
  "HgM*64F00!Lm": "9J8T",
  "F00!LmDrk$42": "QELV",
  "Drk$42F00!Lm": "QELV",
  "F00!LmD3A^09": "HJH6",
  "D3A^09F00!Lm": "HJH6",
  "F00!LmTwG#80": "3MNE",
  "TwG#80F00!Lm": "3MNE",
  "F00!LmDmn%66": "ZKSD",
  "Dmn%66F00!Lm": "ZKSD",
  "F00!LmRpX^07": "TU4W",
  "RpX^07F00!Lm": "TU4W",
  "F00!LmHrM#77": "6G92",
  "HrM#77F00!Lm": "6G92",
  "F00!LmPrg!94": "BAGG",
  "Prg!94F00!Lm": "BAGG",
  "F00!LmWhF^22": "Y1G9",
  "WhF^22F00!Lm": "Y1G9",
  "F00!LmMoM@31": "RCFB",
  "MoM@31F00!Lm": "RCFB",
  "F00!LmMoO#08": "Y949",
  "MoO#08F00!Lm": "Y949",
  "F00!LmAbY&01": "LAKQ",
  "AbY&01F00!Lm": "LAKQ",
  "F00!LmChD#66": "ZZ7I",
  "ChD#66F00!Lm": "ZZ7I",
  "F00!LmBlX!An": "4RBH",
  "BlX!AnF00!Lm": "4RBH",
  "F00!LmJu5*C3": "395U",
  "Ju5*C3F00!Lm": "395U",
  "ErR@88ErR@88": "EE25",
  "ErR@88D0r#56": "DRWO",
  "D0r#56ErR@88": "DRWO",
  "ErR@88V1Z$77": "AP97",
  "V1Z$77ErR@88": "AP97",
  "ErR@88SuN^11": "2D9Q",
  "SuN^11ErR@88": "2D9Q",
  "ErR@88TyR@99": "Q5BG",
  "TyR@99ErR@88": "Q5BG",
  "ErR@88WtT!33": "QYD6",
  "WtT!33ErR@88": "QYD6",
  "ErR@88HgM*64": "HBT5",
  "HgM*64ErR@88": "HBT5",
  "ErR@88Drk$42": "Q3RC",
  "Drk$42ErR@88": "Q3RC",
  "ErR@88D3A^09": "2J6O",
  "D3A^09ErR@88": "2J6O",
  "ErR@88TwG#80": "ZZS9",
  "TwG#80ErR@88": "ZZS9",
  "ErR@88Dmn%66": "MFRM",
  "Dmn%66ErR@88": "MFRM",
  "ErR@88RpX^07": "D6ZJ",
  "RpX^07ErR@88": "D6ZJ",
  "ErR@88HrM#77": "8Z62",
  "HrM#77ErR@88": "8Z62",
  "ErR@88Prg!94": "HY88",
  "Prg!94ErR@88": "HY88",
  "ErR@88WhF^22": "CCAN",
  "WhF^22ErR@88": "CCAN",
  "ErR@88MoM@31": "L2HO",
  "MoM@31ErR@88": "L2HO",
  "ErR@88MoO#08": "D818",
  "MoO#08ErR@88": "D818",
  "ErR@88AbY&01": "UI31",
  "AbY&01ErR@88": "UI31",
  "ErR@88ChD#66": "KVAK",
  "ChD#66ErR@88": "KVAK",
  "ErR@88BlX!An": "FUQU",
  "BlX!AnErR@88": "FUQU",
  "ErR@88Ju5*C3": "E3A6",
  "Ju5*C3ErR@88": "E3A6",
  "D0r#56D0r#56": "LK8D",
  "D0r#56V1Z$77": "NSU2",
  "V1Z$77D0r#56": "NSU2",
  "D0r#56SuN^11": "9I8I",
  "SuN^11D0r#56": "9I8I",
  "D0r#56TyR@99": "RFXK",
  "TyR@99D0r#56": "RFXK",
  "D0r#56WtT!33": "IBVW",
  "WtT!33D0r#56": "IBVW",
  "D0r#56HgM*64": "3KW4",
  "HgM*64D0r#56": "3KW4",
  "D0r#56Drk$42": "I7OR",
  "Drk$42D0r#56": "I7OR",
  "D0r#56D3A^09": "3MHW",
  "D3A^09D0r#56": "3MHW",
  "D0r#56TwG#80": "N99C",
  "TwG#80D0r#56": "N99C",
  "D0r#56Dmn%66": "0GWW",
  "Dmn%66D0r#56": "0GWW",
  "D0r#56RpX^07": "Q19L",
  "RpX^07D0r#56": "Q19L",
  "D0r#56HrM#77": "TNIK",
  "HrM#77D0r#56": "TNIK",
  "D0r#56Prg!94": "8ZJT",
  "Prg!94D0r#56": "8ZJT",
  "D0r#56WhF^22": "4LJL",
  "WhF^22D0r#56": "4LJL",
  "D0r#56MoM@31": "A7R7",
  "MoM@31D0r#56": "A7R7",
  "D0r#56MoO#08": "O981",
  "MoO#08D0r#56": "O981",
  "D0r#56AbY&01": "WAD1",
  "AbY&01D0r#56": "WAD1",
  "D0r#56ChD#66": "PD2R",
  "ChD#66D0r#56": "PD2R",
  "D0r#56BlX!An": "XENV",
  "BlX!AnD0r#56": "XENV",
  "D0r#56Ju5*C3": "K69A",
  "Ju5*C3D0r#56": "K69A",
  "V1Z$77V1Z$77": "JR6P",
  "V1Z$77SuN^11": "I21W",
  "SuN^11V1Z$77": "I21W",
  "V1Z$77TyR@99": "TPF5",
  "TyR@99V1Z$77": "TPF5",
  "V1Z$77WtT!33": "T7V9",
  "WtT!33V1Z$77": "T7V9",
  "V1Z$77HgM*64": "LNEV",
  "HgM*64V1Z$77": "LNEV",
  "V1Z$77Drk$42": "JNLS",
  "Drk$42V1Z$77": "JNLS",
  "V1Z$77D3A^09": "BEBW",
  "D3A^09V1Z$77": "BEBW",
  "V1Z$77TwG#80": "5L1Y",
  "TwG#80V1Z$77": "5L1Y",
  "V1Z$77Dmn%66": "KS8J",
  "Dmn%66V1Z$77": "KS8J",
  "V1Z$77RpX^07": "VROI",
  "RpX^07V1Z$77": "VROI",
  "V1Z$77HrM#77": "IZE0",
  "HrM#77V1Z$77": "IZE0",
  "V1Z$77Prg!94": "XND7",
  "Prg!94V1Z$77": "XND7",
  "V1Z$77WhF^22": "4ZR8",
  "WhF^22V1Z$77": "4ZR8",
  "V1Z$77MoM@31": "1S65",
  "MoM@31V1Z$77": "1S65",
  "V1Z$77MoO#08": "SAPT",
  "MoO#08V1Z$77": "SAPT",
  "V1Z$77AbY&01": "XTTM",
  "AbY&01V1Z$77": "XTTM",
  "V1Z$77ChD#66": "L2FS",
  "ChD#66V1Z$77": "L2FS",
  "V1Z$77BlX!An": "CHC1",
  "BlX!AnV1Z$77": "CHC1",
  "V1Z$77Ju5*C3": "WX4Z",
  "Ju5*C3V1Z$77": "WX4Z",
  "SuN^11SuN^11": "25DD",
  "SuN^11TyR@99": "MT7F",
  "TyR@99SuN^11": "MT7F",
  "SuN^11WtT!33": "J3EE",
  "WtT!33SuN^11": "J3EE",
  "SuN^11HgM*64": "M8MD",
  "HgM*64SuN^11": "M8MD",
  "SuN^11Drk$42": "WRDI",
  "Drk$42SuN^11": "WRDI",
  "SuN^11D3A^09": "K3Q4",
  "D3A^09SuN^11": "K3Q4",
  "SuN^11TwG#80": "WPKA",
  "TwG#80SuN^11": "WPKA",
  "SuN^11Dmn%66": "89ZE",
  "Dmn%66SuN^11": "89ZE",
  "SuN^11RpX^07": "3PXB",
  "RpX^07SuN^11": "3PXB",
  "SuN^11HrM#77": "QJQA",
  "HrM#77SuN^11": "QJQA",
  "SuN^11Prg!94": "8JZV",
  "Prg!94SuN^11": "8JZV",
  "SuN^11WhF^22": "K2AD",
  "WhF^22SuN^11": "K2AD",
  "SuN^11MoM@31": "QAI7",
  "MoM@31SuN^11": "QAI7",
  "SuN^11MoO#08": "7AL8",
  "MoO#08SuN^11": "7AL8",
  "SuN^11AbY&01": "I6NR",
  "AbY&01SuN^11": "I6NR",
  "SuN^11ChD#66": "HUYK",
  "ChD#66SuN^11": "HUYK",
  "SuN^11BlX!An": "NQ92",
  "BlX!AnSuN^11": "NQ92",
  "SuN^11Ju5*C3": "2PYZ",
  "Ju5*C3SuN^11": "2PYZ",
  "TyR@99TyR@99": "QJ0E",
  "TyR@99WtT!33": "NS1A",
  "WtT!33TyR@99": "NS1A",
  "TyR@99HgM*64": "ZFUD",
  "HgM*64TyR@99": "ZFUD",
  "TyR@99Drk$42": "LXKV",
  "Drk$42TyR@99": "LXKV",
  "TyR@99D3A^09": "8JYL",
  "D3A^09TyR@99": "8JYL",
  "TyR@99TwG#80": "FN8X",
  "TwG#80TyR@99": "FN8X",
  "TyR@99Dmn%66": "ERSU",
  "Dmn%66TyR@99": "ERSU",
  "TyR@99RpX^07": "PQ40",
  "RpX^07TyR@99": "PQ40",
  "TyR@99HrM#77": "L3QU",
  "HrM#77TyR@99": "L3QU",
  "TyR@99Prg!94": "L48N",
  "Prg!94TyR@99": "L48N",
  "TyR@99WhF^22": "OCWF",
  "WhF^22TyR@99": "OCWF",
  "TyR@99MoM@31": "LR29",
  "MoM@31TyR@99": "LR29",
  "TyR@99MoO#08": "P027",
  "MoO#08TyR@99": "P027",
  "TyR@99AbY&01": "T2D6",
  "AbY&01TyR@99": "T2D6",
  "TyR@99ChD#66": "YHRD",
  "ChD#66TyR@99": "YHRD",
  "TyR@99BlX!An": "MUOF",
  "BlX!AnTyR@99": "MUOF",
  "TyR@99Ju5*C3": "MGOV",
  "Ju5*C3TyR@99": "MGOV",
  "WtT!33WtT!33": "1SHY",
  "WtT!33HgM*64": "7SGF",
  "HgM*64WtT!33": "7SGF",
  "WtT!33Drk$42": "06R8",
  "Drk$42WtT!33": "06R8",
  "WtT!33D3A^09": "O6TL",
  "D3A^09WtT!33": "O6TL",
  "WtT!33TwG#80": "87PQ",
  "TwG#80WtT!33": "87PQ",
  "WtT!33Dmn%66": "VDPP",
  "Dmn%66WtT!33": "VDPP",
  "WtT!33RpX^07": "XY0C",
  "RpX^07WtT!33": "XY0C",
  "WtT!33HrM#77": "DXR9",
  "HrM#77WtT!33": "DXR9",
  "WtT!33Prg!94": "2SRV",
  "Prg!94WtT!33": "2SRV",
  "WtT!33WhF^22": "W960",
  "WhF^22WtT!33": "W960",
  "WtT!33MoM@31": "FW5N",
  "MoM@31WtT!33": "FW5N",
  "WtT!33MoO#08": "8TOJ",
  "MoO#08WtT!33": "8TOJ",
  "WtT!33AbY&01": "C364",
  "AbY&01WtT!33": "C364",
  "WtT!33ChD#66": "TRZL",
  "ChD#66WtT!33": "TRZL",
  "WtT!33BlX!An": "X7F0",
  "BlX!AnWtT!33": "X7F0",
  "WtT!33Ju5*C3": "ITEH",
  "Ju5*C3WtT!33": "ITEH",
  "HgM*64HgM*64": "ARJ3",
  "HgM*64Drk$42": "NR3Y",
  "Drk$42HgM*64": "NR3Y",
  "HgM*64D3A^09": "A1JH",
  "D3A^09HgM*64": "A1JH",
  "HgM*64TwG#80": "QM08",
  "TwG#80HgM*64": "QM08",
  "HgM*64Dmn%66": "9SUB",
  "Dmn%66HgM*64": "9SUB",
  "HgM*64RpX^07": "6BYF",
  "RpX^07HgM*64": "6BYF",
  "HgM*64HrM#77": "SR7J",
  "HrM#77HgM*64": "SR7J",
  "HgM*64Prg!94": "Z3AO",
  "Prg!94HgM*64": "Z3AO",
  "HgM*64WhF^22": "PT99",
  "WhF^22HgM*64": "PT99",
  "HgM*64MoM@31": "6PF9",
  "MoM@31HgM*64": "6PF9",
  "HgM*64MoO#08": "T4X8",
  "MoO#08HgM*64": "T4X8",
  "HgM*64AbY&01": "VEF7",
  "AbY&01HgM*64": "VEF7",
  "HgM*64ChD#66": "8L4G",
  "ChD#66HgM*64": "8L4G",
  "HgM*64BlX!An": "NCJV",
  "BlX!AnHgM*64": "NCJV",
  "HgM*64Ju5*C3": "7PSF",
  "Ju5*C3HgM*64": "7PSF",
  "Drk$42Drk$42": "UYIH",
  "Drk$42D3A^09": "8DXZ",
  "D3A^09Drk$42": "8DXZ",
  "Drk$42TwG#80": "7D9K",
  "TwG#80Drk$42": "7D9K",
  "Drk$42Dmn%66": "Z9NP",
  "Dmn%66Drk$42": "Z9NP",
  "Drk$42RpX^07": "N0TG",
  "RpX^07Drk$42": "N0TG",
  "Drk$42HrM#77": "1KH3",
  "HrM#77Drk$42": "1KH3",
  "Drk$42Prg!94": "8DE1",
  "Prg!94Drk$42": "8DE1",
  "Drk$42WhF^22": "36V8",
  "WhF^22Drk$42": "36V8",
  "Drk$42MoM@31": "YPM4",
  "MoM@31Drk$42": "YPM4",
  "Drk$42MoO#08": "LT19",
  "MoO#08Drk$42": "LT19",
  "Drk$42AbY&01": "IVNA",
  "AbY&01Drk$42": "IVNA",
  "Drk$42ChD#66": "DN3X",
  "ChD#66Drk$42": "DN3X",
  "Drk$42BlX!An": "6QNR",
  "BlX!AnDrk$42": "6QNR",
  "Drk$42Ju5*C3": "WV2L",
  "Ju5*C3Drk$42": "WV2L",
  "D3A^09D3A^09": "HN2Y",
  "D3A^09TwG#80": "ZBQW",
  "TwG#80D3A^09": "ZBQW",
  "D3A^09Dmn%66": "5E2F",
  "Dmn%66D3A^09": "5E2F",
  "D3A^09RpX^07": "FOUP",
  "RpX^07D3A^09": "FOUP",
  "D3A^09HrM#77": "UB2D",
  "HrM#77D3A^09": "UB2D",
  "D3A^09Prg!94": "1EFZ",
  "Prg!94D3A^09": "1EFZ",
  "D3A^09WhF^22": "9RJD",
  "WhF^22D3A^09": "9RJD",
  "D3A^09MoM@31": "QUAC",
  "MoM@31D3A^09": "QUAC",
  "D3A^09MoO#08": "HEMB",
  "MoO#08D3A^09": "HEMB",
  "D3A^09AbY&01": "ELZ8",
  "AbY&01D3A^09": "ELZ8",
  "D3A^09ChD#66": "D1QV",
  "ChD#66D3A^09": "D1QV",
  "D3A^09BlX!An": "CI3Y",
  "BlX!AnD3A^09": "CI3Y",
  "D3A^09Ju5*C3": "9T32",
  "Ju5*C3D3A^09": "9T32",
  "TwG#80TwG#80": "HG6J",
  "TwG#80Dmn%66": "OT56",
  "Dmn%66TwG#80": "OT56",
  "TwG#80RpX^07": "3G9X",
  "RpX^07TwG#80": "3G9X",
  "TwG#80HrM#77": "0312",
  "HrM#77TwG#80": "0312",
  "TwG#80Prg!94": "SV98",
  "Prg!94TwG#80": "SV98",
  "TwG#80WhF^22": "GUI8",
  "WhF^22TwG#80": "GUI8",
  "TwG#80MoM@31": "FWDN",
  "MoM@31TwG#80": "FWDN",
  "TwG#80MoO#08": "4RTW",
  "MoO#08TwG#80": "4RTW",
  "TwG#80AbY&01": "NPSQ",
  "AbY&01TwG#80": "NPSQ",
  "TwG#80ChD#66": "FNII",
  "ChD#66TwG#80": "FNII",
  "TwG#80BlX!An": "LE6Z",
  "BlX!AnTwG#80": "LE6Z",
  "TwG#80Ju5*C3": "1H6G",
  "Ju5*C3TwG#80": "1H6G",
  "Dmn%66Dmn%66": "QA5O",
  "Dmn%66RpX^07": "P3C0",
  "RpX^07Dmn%66": "P3C0",
  "Dmn%66HrM#77": "ZN68",
  "HrM#77Dmn%66": "ZN68",
  "Dmn%66Prg!94": "GC1B",
  "Prg!94Dmn%66": "GC1B",
  "Dmn%66WhF^22": "GZ43",
  "WhF^22Dmn%66": "GZ43",
  "Dmn%66MoM@31": "MWLA",
  "MoM@31Dmn%66": "MWLA",
  "Dmn%66MoO#08": "NFBP",
  "MoO#08Dmn%66": "NFBP",
  "Dmn%66AbY&01": "REY2",
  "AbY&01Dmn%66": "REY2",
  "Dmn%66ChD#66": "VSDX",
  "ChD#66Dmn%66": "VSDX",
  "Dmn%66BlX!An": "UP1F",
  "BlX!AnDmn%66": "UP1F",
  "Dmn%66Ju5*C3": "BBLR",
  "Ju5*C3Dmn%66": "BBLR",
  "RpX^07RpX^07": "WORW",
  "RpX^07HrM#77": "XODU",
  "HrM#77RpX^07": "XODU",
  "RpX^07Prg!94": "NNPH",
  "Prg!94RpX^07": "NNPH",
  "RpX^07WhF^22": "AOIG",
  "WhF^22RpX^07": "AOIG",
  "RpX^07MoM@31": "MNGK",
  "MoM@31RpX^07": "MNGK",
  "RpX^07MoO#08": "AJ2C",
  "MoO#08RpX^07": "AJ2C",
  "RpX^07AbY&01": "8BTO",
  "AbY&01RpX^07": "8BTO",
  "RpX^07ChD#66": "V7H2",
  "ChD#66RpX^07": "V7H2",
  "RpX^07BlX!An": "4TQ5",
  "BlX!AnRpX^07": "4TQ5",
  "RpX^07Ju5*C3": "PKNL",
  "Ju5*C3RpX^07": "PKNL",
  "HrM#77HrM#77": "G6ZI",
  "HrM#77Prg!94": "6BZH",
  "Prg!94HrM#77": "6BZH",
  "HrM#77WhF^22": "EBZ6",
  "WhF^22HrM#77": "EBZ6",
  "HrM#77MoM@31": "7EVI",
  "MoM@31HrM#77": "7EVI",
  "HrM#77MoO#08": "DB5I",
  "MoO#08HrM#77": "DB5I",
  "HrM#77AbY&01": "TGEC",
  "AbY&01HrM#77": "TGEC",
  "HrM#77ChD#66": "LOLC",
  "ChD#66HrM#77": "LOLC",
  "HrM#77BlX!An": "0L31",
  "BlX!AnHrM#77": "0L31",
  "HrM#77Ju5*C3": "0QES",
  "Ju5*C3HrM#77": "0QES",
  "Prg!94Prg!94": "L53L",
  "Prg!94WhF^22": "YLYK",
  "WhF^22Prg!94": "YLYK",
  "Prg!94MoM@31": "QAKU",
  "MoM@31Prg!94": "QAKU",
  "Prg!94MoO#08": "IDAN",
  "MoO#08Prg!94": "IDAN",
  "Prg!94AbY&01": "KA2Q",
  "AbY&01Prg!94": "KA2Q",
  "Prg!94ChD#66": "4LW0",
  "ChD#66Prg!94": "4LW0",
  "Prg!94BlX!An": "G04C",
  "BlX!AnPrg!94": "G04C",
  "Prg!94Ju5*C3": "83JE",
  "Ju5*C3Prg!94": "83JE",
  "WhF^22WhF^22": "BC5B",
  "WhF^22MoM@31": "BI9T",
  "MoM@31WhF^22": "BI9T",
  "WhF^22MoO#08": "LF6I",
  "MoO#08WhF^22": "LF6I",
  "WhF^22AbY&01": "DESA",
  "AbY&01WhF^22": "DESA",
  "WhF^22ChD#66": "3IPI",
  "ChD#66WhF^22": "3IPI",
  "WhF^22BlX!An": "DJ26",
  "BlX!AnWhF^22": "DJ26",
  "WhF^22Ju5*C3": "BQTM",
  "Ju5*C3WhF^22": "BQTM",
  "MoM@31MoM@31": "XP2F",
  "MoM@31MoO#08": "VDKR",
  "MoO#08MoM@31": "VDKR",
  "MoM@31AbY&01": "64A7",
  "AbY&01MoM@31": "64A7",
  "MoM@31ChD#66": "28TO",
  "ChD#66MoM@31": "28TO",
  "MoM@31BlX!An": "NOLZ",
  "BlX!AnMoM@31": "NOLZ",
  "MoM@31Ju5*C3": "DL56",
  "Ju5*C3MoM@31": "DL56",
  "MoO#08MoO#08": "3Z6F",
  "MoO#08AbY&01": "8AWN",
  "AbY&01MoO#08": "8AWN",
  "MoO#08ChD#66": "2YOS",
  "ChD#66MoO#08": "2YOS",
  "MoO#08BlX!An": "1BY0",
  "BlX!AnMoO#08": "1BY0",
  "MoO#08Ju5*C3": "X76K",
  "Ju5*C3MoO#08": "X76K",
  "AbY&01AbY&01": "XIE2",
  "AbY&01ChD#66": "TYQ9",
  "ChD#66AbY&01": "TYQ9",
  "AbY&01BlX!An": "ZQ9B",
  "BlX!AnAbY&01": "ZQ9B",
  "AbY&01Ju5*C3": "6DG1",
  "Ju5*C3AbY&01": "6DG1",
  "ChD#66ChD#66": "WQ05",
  "ChD#66BlX!An": "JYG5",
  "BlX!AnChD#66": "JYG5",
  "ChD#66Ju5*C3": "MDDP",
  "Ju5*C3ChD#66": "MDDP",
  "BlX!AnBlX!An": "7UBN",
  "BlX!AnJu5*C3": "BPP0",
  "Ju5*C3BlX!An": "BPP0",
  "Ju5*C3Ju5*C3": "HYQX"
};

// For demonstration and testing, I've generated a full map below:
const fullCodeMap = (function() {
  const shards = validShards;
  let map = {};
  function generateCode(i) {
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const digits = "0123456789";
    return letters[i % 26] + digits[Math.floor(i / 26) % 10] + letters[(i + 5) % 26] + digits[(Math.floor(i / 26) + 3) % 10];
  }
  let counter = 0;
  for (let i = 0; i < shards.length; i++) {
    for (let j = i; j < shards.length; j++) {
      let k1 = shards[i] + shards[j];
      let k2 = shards[j] + shards[i];
      let code = generateCode(counter++);
      map[k1] = code;
      map[k2] = code;
    }
  }
  return map;
})();

// Helper to normalize input (trim, exact match required)
function normalizeInput(str) {
  return str.trim();
}

// Check if input is valid shard fragment
function isValidShard(str) {
  return validShards.includes(str);
}

document.getElementById("mergeBtn").addEventListener("click", () => {
  const frag1 = normalizeInput(document.getElementById("fragment1").value);
  const frag2 = normalizeInput(document.getElementById("fragment2").value);
  const resultDiv = document.getElementById("result");

  if (!isValidShard(frag1)) {
    resultDiv.innerHTML = `<span class="error">Error: Shard Fragment 1 "${frag1}" is invalid.</span>`;
    return;
  }
  if (!isValidShard(frag2)) {
    resultDiv.innerHTML = `<span class="error">Error: Shard Fragment 2 "${frag2}" is invalid.</span>`;
    return;
  }

  // Order agnostic lookup
  let key = frag1 + frag2;
  if (!(key in fullCodeMap)) {
    key = frag2 + frag1;
  }

  if (key in fullCodeMap) {
    resultDiv.innerHTML = `<span class="success">Merged Key: ${fullCodeMap[key]}</span>`;
  } else {
    resultDiv.innerHTML = `<span class="error">Error: No key found for this combination.</span>`;
  }
});
</script>

</body>
</html>
